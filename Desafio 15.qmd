---
title: "Desafio 15"
format: html
editor: visual
---

```{r}
library(JuliaCall)
julia_setup()
julia_command("Threads.nthreads()")
```

```{julia}

using Dates
println("Código executado em: ", Dates.format(Dates.now(), "yyyy-mm-dd HH:MM:SS"))

println("Threads disponíveis: ", Threads.nthreads())

function tarefa_pesada(x)
    s = 0.0
    for i in 1:10_000
        s += sin(x) * cos(i)
    end
    return s
end

# Série
function execucao_serie(N)
    result = zeros(Float64, N)
    @time for i in 1:N
        result[i] = tarefa_pesada(i)
    end
    return result
end

# Paralelo
function execucao_paralela(N)
    result = zeros(Float64, N)
    @time Threads.@threads for i in 1:N
        result[i] = tarefa_pesada(i)
    end
    return result
end

N = 50_000

println("\n--- Executando em série ---")
res1 = execucao_serie(N)

println("\n--- Executando em paralelo ---")
res2 = execucao_paralela(N)

```
