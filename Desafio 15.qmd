---
title: "Desafio 15"
format: html
editor: visual
---

```{r}
library(JuliaCall)
julia_setup()
julia_command("Threads.nthreads()")
```

```{julia}

# Ver quantas threads estão disponíveis
println("Threads disponíveis: ", Threads.nthreads())

# Uma tarefa simples: soma de cálculos pesados
function tarefa_pesada(x)
    s = 0.0
    for i in 1:10_000
        s += sin(x) * cos(i)
    end
    return s
end

# ---------------------------
# Execução em série
# ---------------------------
function execucao_serie(N)
    result = zeros(Float64, N)
    @time for i in 1:N
        result[i] = tarefa_pesada(i)
    end
    return result
end

# ---------------------------
# Execução em paralelo (multithread)
# ---------------------------
function execucao_paralela(N)
    result = zeros(Float64, N)
    @time Threads.@threads for i in 1:N
        result[i] = tarefa_pesada(i)
    end
    return result
end

# Rodar os testes
N = 50_000

println("\n--- Executando em série ---")
res1 = execucao_serie(N)

println("\n--- Executando em paralelo ---")
res2 = execucao_paralela(N)

```
